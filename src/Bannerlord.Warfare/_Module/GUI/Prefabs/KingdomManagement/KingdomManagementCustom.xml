<Prefab>
  <Constants>
    <Constant Name="CancelButton.Width" BrushLayer="Default" BrushName="Popup.Cancel.Button" BrushValueType="Width" />
    <Constant Name="CancelButton.Height" BrushLayer="Default" BrushName="Popup.Cancel.Button" BrushValueType="Height" />

    <Constant Name="Header.Tab.Left.Width" BrushLayer="Default" BrushName="Header.Tab.Left" BrushValueType="Width" />
    <Constant Name="Header.Tab.Left.Height" BrushLayer="Default" BrushName="Header.Tab.Left" BrushValueType="Height" />

    <Constant Name="Header.Tab.Left.Width.Scaled" MultiplyResult="0.90" Value="!Header.Tab.Left.Width" />
    <Constant Name="Header.Tab.Left.Height.Scaled" MultiplyResult="0.90" Value="!Header.Tab.Left.Height" />

    <Constant Name="Header.Tab.Center.Width" BrushLayer="Default" BrushName="Header.Tab.Center" BrushValueType="Width" />
    <Constant Name="Header.Tab.Center.Height" BrushLayer="Default" BrushName="Header.Tab.Center" BrushValueType="Height" />

    <Constant Name="Header.Tab.Center.Width.Scaled" MultiplyResult="0.60" Value="!Header.Tab.Center.Width" />
    <Constant Name="Header.Tab.Center.Height.Scaled" MultiplyResult="0.90" Value="!Header.Tab.Center.Height" />

    <Constant Name="Header.Tab.Right.Width" BrushLayer="Default" BrushName="Header.Tab.Right" BrushValueType="Width" />
    <Constant Name="Header.Tab.Right.Height" BrushLayer="Default" BrushName="Header.Tab.Right" BrushValueType="Height" />

    <Constant Name="Header.Tab.Right.Width.Scaled" MultiplyResult="0.90" Value="!Header.Tab.Right.Width" />
    <Constant Name="Header.Tab.Right.Height.Scaled" MultiplyResult="0.90" Value="!Header.Tab.Right.Height" />

    <Constant Name="Banner.Width" BrushLayer="Default" BrushName="Flat.Tuple.Banner.Small" BrushValueType="Width" />
    <Constant Name="Banner.Height" BrushLayer="Default" BrushName="Flat.Tuple.Banner.Small" BrushValueType="Height" />

    <Constant Name="Banner.Width.Scaled" MultiplyResult="0.38" Value="!Banner.Width" />
    <Constant Name="Banner.Height.Scaled" MultiplyResult="0.49" Value="!Banner.Height"/>

  </Constants>
  <VisualDefinitions>
    <VisualDefinition Name="BottomMenu" EaseType="EaseOut" EaseFunction="Quint" TransitionDuration="0.45">
      <VisualState PositionYOffset="0" State="Default" />
    </VisualDefinition>
    <VisualDefinition Name="TopPanel" EaseType="EaseOut" EaseFunction="Quint" TransitionDuration="0.45">
      <VisualState PositionYOffset="0" State="Default" />
    </VisualDefinition>
  </VisualDefinitions>
  <Window>
    <Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent">
      <Children>

        <Standard.Background />

        <!--Top Panel-->
        <Widget VisualDefinition="TopPanel" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="196" VerticalAlignment="Top" PositionYOffset="-196" Sprite="SPKingdom\kingdom_top_header">
          <Children>

            <!--Banner-->
            <MaskedTextureWidget DataSource="{KingdomBanner}" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="105" SuggestedHeight="126" HorizontalAlignment="Left" VerticalAlignment="Top" PositionXOffset="85" MarginTop="15" Brush="Kingdom.TornBanner.Big" AdditionalArgs="@AdditionalArgs" ImageId="@Id" TextureProviderName="@TextureProviderName"  />

            <!--Leader-->
						<NavigationScopeTargeter ScopeID="KingdomLeaderButtonScope" ScopeParent="..\LeaderButton" />
            <ButtonWidget Id="LeaderButton" DataSource="{Leader}" DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="170" SuggestedHeight="130" HorizontalAlignment="Right" VerticalAlignment="Top" MarginRight="100" MarginTop="5" Sprite="leader_slot_9" Command.Click="ExecuteLink" Command.HoverBegin="ExecuteBeginHint" Command.HoverEnd="ExecuteEndHint" GamepadNavigationIndex="0">
              <!--"-->
              <Children>

                <!--Kingdom Leader Clan Banner-->
                <!--<ImageIdentifierWidget DataSource="{ClanBanner}" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="45" SuggestedHeight="45" HorizontalAlignment="Right" VerticalAlignment="Top" MarginRight="8" MarginTop="17" AdditionalArgs="@AdditionalArgs" ImageId="@Id" TextureProviderName="@TextureProviderName" MaterialAlphaFactor="0.8">
                  <Children>
                    <Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="55" SuggestedHeight="55" HorizontalAlignment="Center" VerticalAlignment="Center" Sprite="frame_small_9" />
                  </Children>
                </ImageIdentifierWidget>-->

                <MaskedTextureWidget DataSource="{ClanBanner_9}" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!Banner.Width.Scaled" SuggestedHeight="!Banner.Height.Scaled" HorizontalAlignment="Right" VerticalAlignment="Top" MarginTop="5" MarginRight="5" Brush="Flat.Tuple.Banner.Small.Hero" AdditionalArgs="@AdditionalArgs" ImageId="@Id" TextureProviderName="@TextureProviderName" IsDisabled="true"  />

                <ImageIdentifierWidget DataSource="{ImageIdentifier}" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" SuggestedHeight="100" MarginLeft="17" MarginRight="18" MarginTop="17" MarginBottom="18" AdditionalArgs="@AdditionalArgs" ImageId="@Id" TextureProviderName="@TextureProviderName" />
              </Children>
            </ButtonWidget>

            <!--Leader Text-->
            <TextWidget WidthSizePolicy="Fixed" HeightSizePolicy="CoverChildren" SuggestedWidth="170" HorizontalAlignment="Right" VerticalAlignment="Top" MarginRight="100" MarginTop="130" Brush="Clan.Leader.Text" Text="@LeaderText" />

            <!--Kingdom Name Top Panel-->
            <Widget Id="KingdomNamePanel" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="887" SuggestedHeight="150" HorizontalAlignment="Center" VerticalAlignment="Top" Sprite="StdAssets\tabbar_long">
              <Children>
                <!--Kingdom Name Container-->
								<NavigationScopeTargeter ScopeID="KingdomNameScope" ScopeParent="..\KingdomName" ScopeMovements="Horizontal" HasCircularMovement="false" />
                <Widget Id="KingdomName" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" VerticalAlignment="Top" MarginTop="10">
                  <Children>
                    <ButtonWidget DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="440" SuggestedHeight="47" Brush="Kingdom.Name.Edit.Button" Command.Click="ExecuteChangeKingdomName" IsEnabled="@PlayerCanChangeKingdomName" UpdateChildrenStates="true">
                      <Children>
                        <!--Kingdom Name-->
                        <ListPanel WidthSizePolicy="CoverChildren" HeightSizePolicy="StretchToParent" StackLayout.LayoutMethod="HorizontalLeftToRight" HorizontalAlignment="Center" UpdateChildrenStates="true">
                          <Children>
                            <TextWidget WidthSizePolicy="CoverChildren" HeightSizePolicy="StretchToParent" Brush="Kingdom.NameTitle.Text" Text="@Name" GamepadNavigationIndex="0"/>
                            <BrushWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="29" SuggestedHeight="37" HorizontalAlignment="Right" VerticalAlignment="Center" MarginLeft="10" IsVisible="@PlayerCanChangeKingdomName" Brush="Kingdom.Name.Edit.Icon"  />
                          </Children>
                        </ListPanel>
                      </Children>
                    </ButtonWidget>
                    <HintWidget DataSource="{ChangeKingdomNameHint}" Command.HoverBegin="ExecuteBeginHint" Command.HoverEnd="ExecuteEndHint" />
                  </Children>
                </Widget>
              </Children>
            </Widget>

            <!--Leave Kingdom / Abdicate Leadership Button-->
            <NavigationScopeTargeter ScopeID="KingdomAbdicateLeadershipScope" ScopeParent="..\AbdicateLeadershipButton" ScopeMovements="Horizontal" HasCircularMovement="false" />
            <Widget Id="AbdicateLeadershipButton" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Right" MarginRight="290">
              <Children>
                <ButtonWidget DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="280" SuggestedHeight="70" Brush="Popup.Delete.Button" Command.Click="ExecuteKingdomAction" IsEnabled="@IsKingdomActionEnabled" GamepadNavigationIndex="0">
                  <Children>
                    <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Brush="Popup.Button.Text" Text="@KingdomActionText" />
                  </Children>
                </ButtonWidget>
                <HintWidget DataSource="{KingdomActionHint}" Command.HoverBegin="ExecuteBeginHint" Command.HoverEnd="ExecuteEndHint" />
              </Children>
            </Widget>

            <!-- Select previous tab hotkey -->
            <Widget DoNotAcceptEvents="true" DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="60" SuggestedHeight="60" HorizontalAlignment="Center" VerticalAlignment="Center" PositionXOffset="-695" PositionYOffset="32" IsVisible="@CanSwitchTabs">
              <Children>
                <InputKeyVisualWidget DataSource="{PreviousTabInputKey}" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" KeyID="@KeyID" IsVisible="@IsVisible"/>
              </Children>
            </Widget>

            <!--Tab Control Container-->
            <KingdomTabControlListPanel WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" VerticalAlignment="Bottom" MarginBottom="38" ArmiesButton="ArmiesTabButton" ArmiesPanel="..\..\ArmiesPanel" ClansButton="ClanTabButton" ClansPanel="..\..\ClansPanel" FiefsButton="FiefsTabButton" FiefsPanel="..\..\FiefsPanel" PoliciesButton="PoliciesTabButton" PoliciesPanel="..\..\PoliciesPanel" DiplomacyButton="DiplomacyTabButton" DiplomacyPanel="..\..\DiplomacyPanel" WorldButton="WorldTabButton" WorldPanel="..\..\WorldPanel">
              <Children>

                <!--Clan Tab-->
                <ButtonWidget Id="ClanTabButton" DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!Header.Tab.Right.Width.Scaled" SuggestedHeight="!Header.Tab.Right.Height.Scaled" Brush="Header.Tab.Left" Command.Click="ExecuteShowClan" UpdateChildrenStates="true">
                  <Children>
                    <TextWidget WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" VerticalAlignment="Center" PositionXOffset="10" MarginTop="3" Brush="Clan.TabControl.Text" Text="@ClansText" />
                  </Children>
                </ButtonWidget>

                <!--Fiefs Tab-->
                <ButtonWidget Id="FiefsTabButton" DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!Header.Tab.Center.Width.Scaled" SuggestedHeight="!Header.Tab.Center.Height.Scaled" VerticalAlignment="Center" PositionYOffset="2" Brush="Header.Tab.Center" Command.Click="ExecuteShowFiefs" UpdateChildrenStates="true">
                  <Children>
                    <TextWidget DataSource="{..}" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" VerticalAlignment="Center" Brush="Clan.TabControl.Text" Text="@FiefsText" />
                  </Children>
                </ButtonWidget>

                <!--Policies Tab-->
                <ButtonWidget Id="PoliciesTabButton" DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!Header.Tab.Center.Width.Scaled" SuggestedHeight="!Header.Tab.Center.Height.Scaled" VerticalAlignment="Center" PositionYOffset="2" Brush="Header.Tab.Center" Command.Click="ExecuteShowPolicies" IsEnabled="@PlayerHasKingdom" UpdateChildrenStates="true">
                  <Children>
                    <TextWidget WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" VerticalAlignment="Center" Brush="Clan.TabControl.Text" IsEnabled="@PlayerHasKingdom" Text="@PoliciesText" />
                  </Children>
                </ButtonWidget>

                <!--Armies Tab-->
                <ButtonWidget Id="ArmiesTabButton" DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!Header.Tab.Center.Width.Scaled" SuggestedHeight="!Header.Tab.Center.Height.Scaled" HorizontalAlignment="Right" VerticalAlignment="Center" PositionYOffset="2" Brush="Header.Tab.Center" Command.Click="ExecuteShowMilitary" UpdateChildrenStates="true">
                  <Children>
                    <TextWidget WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" VerticalAlignment="Center" Brush="Clan.TabControl.Text" Text="@MilitaryText" />
                  </Children>
                </ButtonWidget>

                <!--Diplomacy Tab-->
                <ButtonWidget Id="DiplomacyTabButton" DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!Header.Tab.Center.Width.Scaled" SuggestedHeight="!Header.Tab.Center.Height.Scaled" HorizontalAlignment="Right" VerticalAlignment="Center" MarginLeft="5" PositionYOffset="2" Position="5" Brush="Header.Tab.Center" Command.Click="ExecuteShowDiplomacy" UpdateChildrenStates="true">
                  <Children>
                    <TextWidget WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" VerticalAlignment="Center" PositionXOffset="-10" MarginTop="3" Brush="Clan.TabControl.Text" Text="@DiplomacyText" />
                  </Children>
                </ButtonWidget>

				<!--World Button-->
				<ButtonWidget Id='WorldTabButton' DoNotPassEventsToChildren='true' WidthSizePolicy='Fixed' HeightSizePolicy='Fixed' SuggestedWidth='!Header.Tab.Right.Width.Scaled' SuggestedHeight='!Header.Tab.Right.Height.Scaled' HorizontalAlignment='Right' VerticalAlignment='Center' MarginLeft='5' Brush='Header.Tab.Right' Command.Click='ExecuteShowWorld' UpdateChildrenStates='true'>
				  <Children>
					<TextWidget WidthSizePolicy='CoverChildren' HeightSizePolicy='CoverChildren' HorizontalAlignment='Center' VerticalAlignment='Center' Brush='Clan.TabControl.Text' Text='@WorldText' />
				  </Children>
				</ButtonWidget>

              </Children>
            </KingdomTabControlListPanel>

            <!-- Select next tab hotkey -->
            <Widget DoNotAcceptEvents="true" DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="60" SuggestedHeight="60" HorizontalAlignment="Center" VerticalAlignment="Center" PositionXOffset="695" PositionYOffset="32" IsVisible="@CanSwitchTabs">
              <Children>
                <InputKeyVisualWidget DataSource="{NextTabInputKey}" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" KeyID="@KeyID" IsVisible="@IsVisible"/>
              </Children>
            </Widget>
          </Children>
        </Widget>

        <ArmiesPanel Id="ArmiesPanel" DataSource="{Military}" MarginTop="188" MarginBottom="75" />
        <ClansPanel Id="ClansPanel" DataSource="{Clan}" MarginTop="188" MarginBottom="75" />
        <FiefsPanel Id="FiefsPanel" DataSource="{Settlement}" MarginTop="188" MarginBottom="75" />
        <PoliciesPanel Id="PoliciesPanel" DataSource="{Policy}" MarginTop="188" MarginBottom="75" />
        <DiplomacyPanel Id="DiplomacyPanel" DataSource="{Diplomacy}" MarginTop="188" MarginBottom="75" />
		<WorldPanel Id='WorldPanel' DataSource='{World}' MarginTop='188' MarginBottom='75' />

        <!--Close Screen Button-->
        <Standard.DialogCloseButtons VisualDefinition="BottomMenu" PositionYOffset="100" Parameter.DoneButtonAction="ExecuteClose" Parameter.DoneButtonText="@DoneText" Parameter.DoneInputKeyDataSource="{DoneInputKey}" Parameter.ShowCancel="false" />

        <KingdomDecision DataSource="{Decision}" />

        <!--Gift Settlement Popup-->
        <KingdomGiftFiefPopup DataSource="{GiftFief}" />

      </Children>
    </Widget>
  </Window>
</Prefab>